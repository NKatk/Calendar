(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){},28:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return NewList});var D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10),D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6),D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7),D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__),react_router_dom__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(14),react_router_dom__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2),_formNotation_css__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(29),_formNotation_css__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_formNotation_css__WEBPACK_IMPORTED_MODULE_9__),NewList=function(_Component){function NewList(){var _this;return Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__.a)(this,NewList),_this=Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__.a)(this,Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__.a)(NewList).call(this)),_this.handleChange=function(e){_this.setState(Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__.a)({},e.target.name,e.target.value))},_this.handleSubmit=function(e){e.preventDefault();var data=_this.state.json.match(/{(.*?)\}/gi),newArray=[];if(null!==data)try{for(var i=0;data.length>i;i++){var obj=eval("("+data[i]+")");newArray.push(obj)}}catch(err){_this.setState({error:"\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u043e\u0434\u0430!"})}else _this.setState({error:!0});if(0===newArray.length)return _this.setState({error:"\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0432\u0432\u043e\u0434\u0430!"});_this.setState({error:!1}),fetch("/api/newlist",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.localStorage.Authorization},body:JSON.stringify(newArray)}).then(function(e){return e.json()}).then(function(e){if(!e.auth)return localStorage.setItem("Authorization",""),void window.location.reload();_this.setState({result:e})}).catch(function(e){console.log(e),_this.setState({errorRegistration:!0})})},_this.state={helpText:!1,redirect:!1,placeholder:"\u0424\u043e\u0440\u043c\u0430\u0442:\n[\n{start: 0, duration: 15, title: Exercise},\n...\n]",errorRegistration:!1,error:!1,json:"",result:{errors:[],result:!1}},_this}return Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__.a)(NewList,_Component),Object(D_job_Code_AND_Care_Redux_Calendar_redux_calendar_frontend_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__.a)(NewList,[{key:"render",value:function(){var e=this,t=this.state,a=t.json,n=t.error,r=t.errorRegistration,o=t.redirect,l=t.helpText,i=this.state.result,s=i.errors,c=i.result;return!window.localStorage.Authorization||o?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.a,{to:"/"}):r?react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("h3",{className:"errorRegistration"},"\u041e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443"):c?(setTimeout(function(){e.setState({redirect:!0})},1e3),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("h3",{className:"successRegistration"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")):react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("form",{className:"formNotation",onSubmit:this.handleSubmit},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("label",{className:"labelArea",htmlFor:"json"},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0432\u0430\u0448 \u0424\u0430\u0439\u043b"),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("textarea",{style:{marginBottom:"25px"},className:"textArea",name:"json",id:"json",value:a,onChange:this.handleChange,placeholder:this.state.placeholder}),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{style:{marginBottom:"-15px",marginTop:"-20px"}},n&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i",{className:"errorMessage"},n)),s&&s.map(function(e,t){return react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{key:t},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("i",{className:"errorMessage"},e),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null))})),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button",{className:"buttonSendNotation"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement(react_router_dom__WEBPACK_IMPORTED_MODULE_8__.b,{to:"/"},react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("button",{className:"buttonCancelNotation"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")),react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("span",{className:"buttonFAQ",onClick:function(){var t=!l;e.setState({helpText:t})}},"?"),l&&react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("div",{className:"helpTextListOne"},"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0433\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430 \u0443\u0434\u0430\u043b\u0438\u0442 \u0432\u0441\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0440\u0430\u043d\u0435\u0435 ",react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null),"\u041e\u0434\u043d\u043e\u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0434\u0432\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u044f ",react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null),"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u0434\u043b\u044f\u0449\u0438\u0435\u0441\u044f \u0434\u043e\u043b\u044c\u0448\u0435 17:00 \u0431\u0443\u0434\u0443\u0442 \u043e\u0431\u0440\u0435\u0437\u0430\u043d\u044b ",react__WEBPACK_IMPORTED_MODULE_6___default.a.createElement("br",null),"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u043f\u043e\u0437\u0436\u0435 17.00(start: 541) \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u044b"))}}]),NewList}(react__WEBPACK_IMPORTED_MODULE_6__.Component)},29:function(e,t,a){},33:function(e,t,a){e.exports=a(53)},42:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),l=a.n(o),i=a(16),s="DATA_LOADED",c={eventServer:[]};var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;return t.type===s?{eventServer:t.payload}:e},u=a(30),m=Object(i.c)(_,Object(i.a)(u.a)),d=a(15),h=a(5),p=a(6),E=a(8),f=a(7),b=a(9),g=a(2),v=a(14),C=(a(42),function(e){var t=e.auth,a=e.checkAuth,n=r.a.createElement("ul",{className:"listNav"},r.a.createElement("li",{className:"listItem"},r.a.createElement(g.b,{className:"navLink",to:"",onClick:function(){localStorage.setItem("Authorization",""),a()}},"\u0412\u044b\u0439\u0442\u0438"))),o=r.a.createElement("ul",{className:"listNav"},r.a.createElement("li",{className:"listItem"},r.a.createElement(g.b,{className:"navLink",to:"/login"},"\u0412\u043e\u0439\u0442\u0438")),r.a.createElement("li",{className:"listItem"},r.a.createElement(g.b,{className:"navLink",to:"/registration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")));return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement(g.b,{className:"navLink",to:"/"},r.a.createElement("img",{src:"/images/Calendar.ico",alt:"Brand",className:"brandNav"}))),t?n:o)}),O=a(10);function N(){return function(e){return fetch("/api/takeevents",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.localStorage.Authorization}}).then(function(e){return e.json()}).then(function(t){if(!t.auth)return localStorage.setItem("Authorization",""),window.location.reload();e({type:s,payload:t.result})}).catch(function(e){return console.log(e)})}}a(48),a(49);var D=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).adaptationList=function(e){var t,a=[];e.map(function(e){var t={id:e._id,top:2*e.start,height:2*e.duration,left:50,width:198,title:e.title};return a.push(Object.assign({},t))});for(var n=0;n<a.length;n++)if(a[n].top<600&&a[n].top+a[n].height>600){var r=a[n].top+a[n].height-600;a[n].height=600-a[n].top;var o={id:a.length,idParent:a[n].id,top:600,height:r,left:50,width:198,title:"Continue: ".concat(a[n].title)};a.splice(n+1,0,o)}a.sort(function(e,t){return e.top-t.top});for(var l=0;l<a.length;l++)l?(a[l].top<t&&(a[l].width=98,a[l-1].width=98,50!==a[l].left&&150!==a[l].left||(a[l].left=50===a[l-1].left?150:50),a[l].top<t&&a[l].top>a[l-1].top+a[l-1].height&&(a[l].left=a[l-1].left)),(a[l].top>t||a[l].top+a[l].height>t)&&(t=a[l].top+a[l].height)):t=a[l].top+a[l].height;for(var i=0;i<a.length;i++)a[i].top>=600&&(a[i].top-=600,a[i].left+=300);return a},e.state={tableOne:["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30"],tableTwo:["13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00"],newList:[],activeAdaptList:{},helpText:!1},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getData()}},{key:"render",value:function(){var e,t=this;0!==this.props.eventServer.length&&(e=this.adaptationList(this.props.eventServer));var a=this.state,n=a.tableOne,o=a.tableTwo,l=a.helpText,i=a.activeAdaptList;return r.a.createElement("div",{className:"containerContent"},r.a.createElement("div",{className:"buttonNav"},r.a.createElement(g.b,{to:"/newnotation"},r.a.createElement("button",{className:"buttonNewEvent"},"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435")),r.a.createElement(g.b,{to:"/newlist"},r.a.createElement("button",{className:"buttonNewList"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a")),r.a.createElement("span",{className:"buttonFAQ",onClick:function(){var e=!l;t.setState({helpText:e})}},"?"),l&&r.a.createElement("div",{className:"helpText"},"\u0414\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f: \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438.")),r.a.createElement("table",{className:"container1"},r.a.createElement("tbody",null,n.map(function(e,t){return r.a.createElement("tr",{className:"trbody",key:t},r.a.createElement("td",{className:t%2===0?"tdtimeline":"tdtime"},e),r.a.createElement("td",{className:t%2===0?"tdtitleline":"tdtitle"}," "))}))),r.a.createElement("table",{className:"container2"},r.a.createElement("tbody",null,o.map(function(e,t){return r.a.createElement("tr",{className:"trbody",key:t},r.a.createElement("td",{className:t%2===0?"tdtimeline":"tdtime"},e),r.a.createElement("td",{className:t%2===0?"tdtitleline":"tdtitle"}," "))}))),r.a.createElement("div",{className:"events"},e&&e.map(function(e){return i[e.id]?r.a.createElement("div",{key:e.id,className:i[e.id]?"cardEventsActive":"cardEvents",style:{top:e.top,height:e.height,left:e.left,width:198},onClick:function(){var a=e.id;t.setState({activeAdaptList:Object(O.a)({},a,!i[a])})}},e.title,r.a.createElement("div",{className:"buttonControl",style:{height:e.height,width:198}},r.a.createElement(g.b,{to:"/newnotation/".concat(e.idParent?e.idParent:e.id)},r.a.createElement("button",{className:"buttonChange"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c/\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))):r.a.createElement("div",{key:e.id,className:i[e.id]?"cardEventsActive":"cardEvents",style:{top:e.top,height:e.height,left:e.left,width:e.width},onClick:function(){var a=e.id;t.setState({activeAdaptList:Object(O.a)({},a,!i[a])})}},e.title)})))}}]),t}(n.Component);var w=Object(d.b)(function(e){return{eventServer:e.eventServer}},{getData:N})(D),A=(a(50),function(e){return r.a.createElement("div",{className:"notRegistration"},r.a.createElement("h3",{className:"notRegistrationTitle"},"\u0412\u044b \u043d\u0435 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u044b"),r.a.createElement("p",null,r.a.createElement(g.b,{className:"notRegistrationLink",to:"/registration"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c")," \u0438\u043b\u0438/\u0438 ",r.a.createElement(g.b,{className:"notRegistrationLink",to:"/login"},"\u0432\u043e\u0439\u0434\u0438\u0442\u0435")))}),M=(a(51),function(){return r.a.createElement("div",{className:"notfound"},r.a.createElement("h3",{className:"textNotfound"},"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"),r.a.createElement(g.b,{className:"linkNotfound",to:"/"},"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"))}),P=(a(27),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).handleSubmit=function(t){t.preventDefault();var a={login:e.state.login,password:e.state.password};fetch("/api/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){e.setState({result:t})}).catch(function(t){console.log(t),e.setState({errorRegistration:!0})})},e.handleInputChange=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.successRedirect=function(){setTimeout(function(){localStorage.setItem("Authorization",e.state.result.token),window.location.reload()},1e3)},e.state={errorRegistration:!1,login:"",password:"",result:{errors:{},result:!1}},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.password,n=e.errorRegistration,o=this.state.result,l=o.errors,i=o.result;return window.localStorage.Authorization?r.a.createElement(v.a,{to:"/"}):i?(this.successRedirect(),r.a.createElement("h3",{className:"successRegistration"},"\u0412\u0445\u043e\u0434 \u0443\u0441\u043f\u0435\u0448\u0435\u043d!")):n?r.a.createElement("h3",{className:"errorRegistration"},"\u041e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443"):r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},r.a.createElement("h3",{className:"titleForm"},"\u0412\u0445\u043e\u0434"),r.a.createElement("input",{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"login",onChange:this.handleInputChange,value:t,className:l.login?"inputFormDanger":"inputForm"}),l.login&&r.a.createElement("i",{className:"errorMessage"},l.login),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",onChange:this.handleInputChange,value:a,className:l.password?"inputFormDanger":"inputForm"}),l.password&&r.a.createElement("i",{className:"errorMessage"},l.password),r.a.createElement("br",null),r.a.createElement("button",{className:"buttonForm",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))}}]),t}(n.Component)),S=a(28),R=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).handleSubmit=function(t){t.preventDefault();var a={login:e.state.login,email:e.state.email,password:e.state.password,confpassword:e.state.confpassword};fetch("/api/registration",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(t){e.setState({result:t})}).catch(function(t){console.log(t),e.setState({errorRegistration:!0})})},e.handleInputChange=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.successRedirect=function(){setTimeout(function(){e.setState({redirect:!0})},1e3)},e.state={redirect:!1,errorRegistration:!1,login:"",email:"",password:"",confpassword:"",result:{errors:{},result:!1}},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state,t=e.login,a=e.confpassword,n=e.email,o=e.password,l=e.errorRegistration,i=e.redirect,s=this.state.result,c=s.result,_=s.errors;return i||window.localStorage.Authorization?r.a.createElement(v.a,{to:"/login"}):c?(this.successRedirect(),r.a.createElement("h3",{className:"successRegistration"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430")):l||_.errDB?r.a.createElement("h3",{className:"errorRegistration"},"\u041e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443"):r.a.createElement("form",{onSubmit:this.handleSubmit,className:"form"},r.a.createElement("h3",{className:"titleForm"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("input",{type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"login",onChange:this.handleInputChange,value:t,className:_.login?"inputFormDanger":"inputForm"}),_.login&&r.a.createElement("i",{className:"errorMessage"},_.login),r.a.createElement("br",null),r.a.createElement("input",{type:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430",name:"email",onChange:this.handleInputChange,value:n,className:_.email?"inputFormDanger":"inputForm"}),_.email&&r.a.createElement("i",{className:"errorMessage"},_.email),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",onChange:this.handleInputChange,value:o,className:_.password?"inputFormDanger":"inputForm"}),_.password&&r.a.createElement("i",{className:"errorMessage"},_.password),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"confpassword",onChange:this.handleInputChange,value:a,className:_.confpassword?"inputFormDanger":"inputForm"}),_.confpassword&&r.a.createElement("i",{className:"errorMessage"},_.confpassword),r.a.createElement("br",null),r.a.createElement("button",{className:"buttonForm",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"))}}]),t}(n.Component),T=(a(29),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).handleChange=function(t){e.setState(Object(O.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){if(t.preventDefault(),!e.state.start||!e.state.duration||0===e.state.title.trim().length)return e.setState({error:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"});e.setState({error:null});var a={start:e.state.start,duration:e.state.duration,title:e.state.title};e.fetchData(a)},e.handleSubmitChange=function(t){var a;if(!e.state.start&&!e.state.duration&&!e.state.title)return a=!0,e.setState({error:"\u0412\u043d\u0435\u0441\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f!"});if(!e.state.start&&!e.state.duration&&0===e.state.title.trim().length)return e.setState({error:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u043f\u043e\u043b\u044f"});var n={id:t._id,start:e.state.start||t.start,duration:e.state.duration||t.duration,title:e.state.title||t.title};e.setState({error:null}),a||e.fetchData(n)},e.handleSubmitDelete=function(t){fetch("/api/deletenotation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.localStorage.Authorization},body:JSON.stringify({id:t})}).then(function(e){return e.json()}).then(function(t){if(!t.auth)return localStorage.setItem("Authorization",""),void window.location.reload();e.setState({result:t})}).catch(function(t){console.log(t),e.setState({errorRegistration:!0})})},e.fetchData=function(t){var a,n=function(t){var n=t.split(":");return+n[0]<8?(a=!0,e.setState({error:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f \u0440\u0430\u043d\u044c\u0448\u0435 08:00 \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u044b!"})):8===+n[0]?+n[1]:60*(+n[0]-8)+ +n[1]};if(n(t.start)>n(t.duration))return a=!0,e.setState({error:"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0437\u0430\u043a\u0430\u043d\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0440\u0430\u043d\u044c\u0448\u0435 \u0447\u0435\u043c \u043d\u0430\u0447\u0430\u043b\u043e\u0441\u044c!"});var r=n(t.duration)-n(t.start),o={id:t.id,start:n(t.start),duration:r,title:t.title};a||fetch("/api/newnotation",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.localStorage.Authorization},body:JSON.stringify(o)}).then(function(e){return e.json()}).then(function(t){if(!t.auth)return localStorage.setItem("Authorization",""),void window.location.reload();e.setState({result:t})}).catch(function(t){console.log(t),e.setState({errorRegistration:!0})})},e.eventFind=function(e,t){for(var a,n,r=0;t.length>r;r++)t[r]._id===e&&(a=Object.assign({},t[r])),n=!0;if(void 0===a&&n)return"NotFound";if(void 0===a)return a;if(0===t.length)return"NotFound";var o=function(e){if(e<60)return"08:"+("0"+e).slice(-2);var t=e%60;return("0"+((e-t)/60+8)).slice(-2)+":"+("0"+t).slice(-2)},l=+a.duration+ +a.start;return a.start=o(a.start),a.duration=o(l),a},e.state={errorRegistration:!1,error:!1,redirect:!1,start:"",duration:"",title:"",result:{}},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.start,n=t.duration,o=t.title,l=t.redirect,i=t.error,s=t.errorRegistration,c=this.state.result,_=c.errors,u=c.result,m=c.resultDelete;if(!window.localStorage.Authorization||l)return r.a.createElement(v.a,{to:"/"});if(s)return r.a.createElement("h3",{className:"errorRegistration"},"\u041e\u0448\u0438\u0431\u043a\u0430, \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435\u0441\u044c \u043a \u0441\u0438\u0441\u0442\u0435\u043c\u043d\u043e\u043c\u0443 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443");if(u||m)return setTimeout(function(){e.setState({redirect:!0})},1e3),u?r.a.createElement("h3",{className:"successRegistration"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"):r.a.createElement("h3",{className:"successRegistration",style:{backgroundColor:"sandybrown"}},"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!");if(this.props.match.params.id){var d=this.eventFind(this.props.match.params.id,this.props.eventServer);if(0!==this.props.eventServer.length&&"object"===typeof d)return r.a.createElement("form",{className:"formNotation"},r.a.createElement("div",{className:"timeLabelInput"},r.a.createElement("label",{htmlFor:"start",className:"labelTimeStart"},"\u041d\u0430\u0447\u0430\u043b\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f "),r.a.createElement("input",{type:"time",value:a||d.start,name:"start",id:"start",className:"inputTimeStart",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"duration",className:"labelTimeEnd"},"\u041a\u043e\u043d\u0435\u0446 \u0441\u043e\u0431\u044b\u0442\u0438\u044f "),r.a.createElement("input",{type:"time",value:n||d.duration,name:"duration",id:"duration",className:"inputTimeEnd",onChange:this.handleChange})),r.a.createElement("input",{style:{marginBottom:"35px"},type:"text",value:o||d.title,name:"title",onChange:this.handleChange,className:"notationTitle",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement("div",{style:{marginBottom:"-10px",marginTop:"-30px"}},i&&r.a.createElement("div",null,r.a.createElement("i",{className:"errorMessage"},i)),_&&_.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("i",{className:"errorMessage"},e),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement("span",{className:"buttonChangeNotationSpan",onClick:function(){return e.handleSubmitChange(d)}},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("span",{className:"buttonDeleteNotationSpan",onClick:function(){return e.handleSubmitDelete(d._id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(g.b,{style:{textDecoration:"none",color:"black"},to:"/"},r.a.createElement("span",{className:"buttonCancelNotationSpan"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")));if("NotFound"===d)return r.a.createElement("h3",{className:"errorRegistration"},"\u0421\u043e\u0431\u044b\u0442\u0438\u0435 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!")}return r.a.createElement("form",{className:"formNotation",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"timeLabelInput"},r.a.createElement("label",{htmlFor:"start",className:"labelTimeStart"},"\u041d\u0430\u0447\u0430\u043b\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f "),r.a.createElement("input",{type:"time",value:a,name:"start",id:"start",className:"inputTimeStart",onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"duration",className:"labelTimeEnd"},"\u041a\u043e\u043d\u0435\u0446 \u0441\u043e\u0431\u044b\u0442\u0438\u044f "),r.a.createElement("input",{type:"time",value:n,name:"duration",id:"duration",className:"inputTimeEnd",onChange:this.handleChange})),r.a.createElement("input",{style:{marginBottom:"25px"},type:"text",value:o,name:"title",onChange:this.handleChange,className:"notationTitle",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement("div",{style:{marginBottom:"-15px",marginTop:"-20px"}},i&&r.a.createElement("div",null,r.a.createElement("i",{className:"errorMessage"},i)),_&&_.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("i",{className:"errorMessage"},e),r.a.createElement("br",null))})),r.a.createElement("br",null),r.a.createElement("button",{className:"buttonSendNotation",type:"submit"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(g.b,{to:"/"},r.a.createElement("button",{className:"buttonCancelNotation"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}}]),t}(n.Component));var j=Object(d.b)(function(e){return{eventServer:e.eventServer}},{getData:N})(T),y=(a(52),function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(E.a)(this,Object(f.a)(t).call(this))).checkAuth=function(){fetch("/api/checkauth",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:window.localStorage.Authorization},body:JSON.stringify({Authorization:window.localStorage.Authorization})}).then(function(e){return e.json()}).then(function(t){e.setState({auth:t.auth,check:!0})}).catch(function(e){console.log(e)})},e.state={auth:!1,check:!1},e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.checkAuth()}},{key:"render",value:function(){var e=this.state,t=e.auth;return e.check?r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(C,{auth:t,checkAuth:this.checkAuth}),r.a.createElement("div",{className:"content"},r.a.createElement(v.d,null,r.a.createElement(v.b,{exact:!0,path:"/",component:t?w:A}),r.a.createElement(v.b,{exact:!0,path:"/login",component:P}),r.a.createElement(v.b,{exact:!0,path:"/registration",component:R}),r.a.createElement(v.b,{exact:!0,path:"/newnotation/:id?",component:j}),r.a.createElement(v.b,{exact:!0,path:"/newlist",component:S.a}),r.a.createElement(v.b,{path:"/*",component:M}))))):r.a.createElement("i",null,"Loading...")}}]),t}(n.Component));l.a.render(r.a.createElement(d.a,{store:m},r.a.createElement(y,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.71219615.chunk.js.map